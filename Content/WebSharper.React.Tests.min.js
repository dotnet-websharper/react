function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be;a=self;b=a.WebSharper=a.WebSharper||{};c=b.React=b.React||{};d=c.Tests=c.Tests||{};e=d.Client=d.Client||{};f=b.Operators=b.Operators||{};g=c.ReactModule=c.ReactModule||{};h=e.EndPoint=e.EndPoint||{};i=a.WebSharper$React$Tests_Router=a.WebSharper$React$Tests_Router||{};j=a.React;k=j&&j.Component;l=e.ContextTest=e.ContextTest||{};m=c.Html=c.Html||{};n=b.JavaScript=b.JavaScript||{};o=n.Pervasives=n.Pervasives||{};p=g.Router=g.Router||{};q=d.TicTacToe=d.TicTacToe||{};r=q.Game=q.Game||{};s=a.EventTarget;t=a.Node;u=g.HashRouter=g.HashRouter||{};v=g.RouterProps=g.RouterProps||{};w=b.Sitelets=b.Sitelets||{};x=w.RouterOperators=w.RouterOperators||{};y=b.Unchecked=b.Unchecked||{};z=b.Ref=b.Ref||{};A=q.GameState=q.GameState||{};B=q.HistoryItem=q.HistoryItem||{};C=b.Arrays=b.Arrays||{};D=a.WindowOrWorkerGlobalScope;E=b.Seq=b.Seq||{};F=w.Router=w.Router||{};G=w.Route=w.Route||{};H=w.List=w.List||{};I=b.List=b.List||{};J=I.T=I.T||{};K=a.Object;L=b.Obj=b.Obj||{};M=w.RouterModule=w.RouterModule||{};N=b.Enumerator=b.Enumerator||{};O=b.Collections=b.Collections||{};P=O.FSharpMap=O.FSharpMap||{};Q=N.T=N.T||{};R=a.Error;S=b.InvalidOperationException=b.InvalidOperationException||{};T=c.Extensions=c.Extensions||{};U=e.WidgetProps=e.WidgetProps||{};V=q.Board=q.Board||{};W=q.BoardProps=q.BoardProps||{};X=O.BalancedTree=O.BalancedTree||{};Y=X.Tree=X.Tree||{};Z=O.Pair=O.Pair||{};_0=O.Map=O.Map||{};_1=b.Lazy=b.Lazy||{};_2=a.StartupCode$WebSharper_React_Tests$Client=a.StartupCode$WebSharper_React_Tests$Client||{};_3=b.Utils=b.Utils||{};_4=b.Slice=b.Slice||{};_5=b.Strings=b.Strings||{};_6=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};_7=_6.LazyRecord=_6.LazyRecord||{};_8=q.SquareProps=q.SquareProps||{};_9=O.MapUtil=O.MapUtil||{};_=w.PathUtil=w.PathUtil||{};$=O.HashSet=O.HashSet||{};ba=O.HashSetUtil=O.HashSetUtil||{};bb=a.ReactDOM;bc=a.IntelliFactory;bd=bc&&bc.Runtime;be=a.console;e.Main=function(){bb.render(j.createElement(u.New,v.New(i.r(),function(bf){var bg;bg=bf.state;return bg.$==1?g.Fragment([j.createElement(l.New,null),j.createElement("a",{href:"javascript:void(0)",onClick:function(){bf.setState(h.Home);}},"Back to Home")]):bg.$==2?g.Fragment([j.createElement("h1",null,"Tic-tac-toe"),j.createElement(r.New,null),j.createElement("a",{href:bf.Link(h.Home)},"Back to Home")]):e.HomePage(bf);})),self.document.getElementById("main"));};e.HomePage=function(bf){return j.createElement("div",null,j.createElement("h1",null,"React tests"),j.createElement("ul",null,j.createElement("li",null,j.createElement("a",{href:bf.Link(h.TicTacToe)},"Tic-Tac-Toe")),j.createElement("li",null,j.createElement("a",{href:bf.Link(h.Context)},"Context"))));};e.theme=function(){_2.$cctor();return _2.theme;};e.Widget=function(bf){return T["Context`1.Consume"](e.theme(),function(bg){return I.ofArray([j.createElement("div",null,((m.textf(bd.Curried3(function(bh,bi,bj){return bh("This should be \""+_3.toSafe(bi)+"\": "+_3.toSafe(bj));})))(bf.shouldBe))(bg))]);});};f.InvalidOp=function(bf){throw new S.New(bf);};f.FailWith=function(bf){throw new R(bf);};g.Fragment=function(bf){return j.createElement(j.Fragment,null,g.inlineArrayOfSeq(bf));};g.inlineArrayOfSeq=function(bf){return bf instanceof a.Array?bf:C.ofSeq(bf);};g.elt=function(bf,bg,bh){return j.createElement(bf,bg,g.inlineArrayOfSeq(bh));};h.Home={$:0};h.TicTacToe={$:2};h.Context={$:1};i.r=function(){return x.JSUnion(void 0,[[null,[[null,[]]],[]],[null,[[null,["context"]]],[]],[null,[[null,["tic-tac-toe"]]],[]]]);};l=e.ContextTest=bd.Class({render:function(){var bf;return g.Fragment([j.createElement("h1",null,"Context test"),(bf=I.ofArray([e.Widget(U.New("provided"))]),T["Context`1.Provide"](e.theme(),"provided",bf)),e.Widget(U.New("default"))]);}},k,l);l.New=bd.Ctor(function(){k.call(this,null);},l);m.textf=function(bf){return bf(a.id);};o.NewFromSeq=function(bf){var bg,bh,bi;bg={};bh=N.Get(bf);try{while(bh.MoveNext()){bi=bh.Current();bg[bi[0]]=bi[1];}}finally{if(typeof bh=="object"&&"Dispose"in bh)bh.Dispose();}return bg;};p=g.Router=bd.Class({render:function(){return this.props.render(this);}},k,p);p.New=bd.Ctor(function(bf){k.call(this,bf);},p);r=q.Game=bd.Class({render:function(){var bf,bg,bh,bi,bj,bk;bf=this;bg=this.state.history;bh=C.get(bg,this.state.stepNumber);bi=q.calculateWinner(bh.squares);bj=C.mapi(function(bl){return j.createElement("li",{key:bl,onClick:function(){bf.jumpTo(bl);}},j.createElement("button",null,bl===0?"Go to game start":"Go to move #"+a.String(bl)));},bg);bk=bi==null?"Next player: "+(this.state.xIsNext?"X":"O"):"Winner: "+bi.$0;return j.createElement("div",{className:"game"},j.createElement("div",{className:"game-board"},j.createElement(V.New,W.New(bh.squares,function(bl){bf.handleClick(bl);}))),j.createElement("div",{className:"game-info"},j.createElement("div",null,bk),g.elt("ol",null,bj)));},handleClick:function(bf){var bg,bh;bg=_4.array(this.state.history,{$:1,$0:0},{$:1,$0:this.state.stepNumber});bh=C.last(bg).squares.slice();q.calculateWinner(bh)!=null||C.get(bh,bf)!=null?void 0:(C.set(bh,bf,{$:1,$0:this.state.xIsNext?"X":"O"}),this.setState(A.New(bg.concat([B.New(bh)]),C.length(bg),!this.state.xIsNext)));},jumpTo:function(bf){this.setState(A.New(this.state.history,bf,bf%2===0));}},k,r);r.New=bd.Ctor(function(){k.call(this,null);this[0]=this;this.init=1;b.checkThis(this[0]).state=A.New([B.New(C.create(9,null))],0,true);},r);u=g.HashRouter=bd.Class({ComputeRoute:function(){var bf;bf=G.FromHash(self.location.hash,{$:1,$0:true});return M.Parse(this.props.router,bf);},componentWillUnmount:function(){self.removeEventListener("hashchange",this.listener);},componentDidUpdate:function(bf,bg,bh){if(!y.Equals(bg,this.state))self.location.hash=this.Link(this.state);},componentDidMount:function(){var bf;bf=this;this.listener=function(){var bg;bg=bf.ComputeRoute();bg==null?void 0:bf.setState(bg.$0);};self.addEventListener("hashchange",bf.listener);},Link:function(bf){return M.HashLink(this.props.router,bf);}},p,u);u.New=bd.Ctor(function(bf){var bg,bh,bi;p.New.call(this,bf);this[0]=this;this.listener=void 0;this.init=1;bg=b.checkThis(this[0]).ComputeRoute();bh=(bi=b.checkThis(this[0]),function(bj){bi.state=bj;});bg==null?void 0:bh(bg.$0);},u);v.New=function(bf,bg){return{router:bf,render:bg};};x.JSUnion=function(bf,bg){var bh;function bi(bm){var bn;function bo(bp){return bp!=null&&bp.$==1&&y.Equals(bm,bp.$0);}bn=E.tryFindIndex(function(bp){return bo(bp[0]);},bg);return bn!=null&&bn.$==1?bn.$0:bm.$;}function bj(bm,bn){return C.init(C.length((C.get(bg,bm))[2]),function(bo){return bn["$"+a.String(bo)];});}function bk(bm,bn){var bo,bp,bq;bo=bf==null?{}:new bf();bp=C.get(bg,bm);return(bq=bp[0],bq!=null&&bq.$==1)?bp[0].$0:(bo.$=bm,E.iteri(function(br,bs){bo["$"+a.String(br)]=bs;},bn),bo);}function bl(bm,bn){var bo;function bp(bq,br){return[bm,bq,br,bo];}bo=bn[2];return E.map(function(bq){return bp(bq[0],bq[1]);},bn[1]);}bh=E.collect(function(bm){return bl(bm[0],bm[1]);},E.indexed(bg));return F.New$1(function(bm){function bn(bo,bp,bq,br){var bs,bt,bu;function bv(bw,bx,by){var bz;function bA(bB,bC){return bv(bz,bB,new J({$:1,$0:bC,$1:by}));}return bw.$==1?(bz=bw.$1,E.collect(function(bB){return bA(bB[0],bB[1]);},bw.$0.Parse(bx))):[[bx,bk(bo,C.ofList(I.rev(by)))]];}return x.isCorrectMethod(bp,bm.Method)?(bs=H.startsWith(I.ofArray(bq),bm.Segments),bs==null?[]:(bt=bs.$0,(bu=I.ofArray(br),bu.$==0?[[G.New(bt,bm.QueryArgs,bm.FormData,bm.Method,bm.Body),bk(bo,[])]]:bv(bu,G.New(bt,bm.QueryArgs,bm.FormData,bm.Method,bm.Body),J.Empty)))):[];}return E.collect(function(bo){return bn(bo[0],bo[1],bo[2],bo[3]);},bh);},function(bm){var bn,bo,bp,bq,br,bs;function bt(bu,bv){return bv.Write(bu);}bn=bi(bm);bo=C.get(bg,bn);bp=bo[2];bq=C.get(bo[1],0);br=[G.Segment(I.ofArray(bq[1]),bq[0])];return!y.Equals(bp,null)&&bp.length===0?{$:1,$0:br}:(bs=(((bd.Curried3(C.map2))(bt))(bj(bn,bm)))(bp),C.forall(function(bu){return bu!=null;},bs)?{$:1,$0:E.append(br,E.collect(function(bu){return bu.$0;},bs))}:null);});};x.isCorrectMethod=function(bf,bg){return bg!=null&&bg.$==1?bf!=null&&bf.$==1?y.Equals(bg.$0,bf.$0):true:!(bf!=null&&bf.$==1);};y.Equals=function(bf,bg){var bh,bi,bj,bk;if(bf===bg)return true;else{bh=typeof bf;if(bh=="object"){if(bf===null||bf===void 0||bg===null||bg===void 0)return false;else if("Equals"in bf)return bf.Equals(bg);else if(bf instanceof a.Array&&bg instanceof a.Array)return y.arrayEquals(bf,bg);else if(bf instanceof a.Date&&bg instanceof a.Date)return y.dateEquals(bf,bg);else{bi=[true];for(var bl in bf)if(function(bm){bi[0]=!bf.hasOwnProperty(bm)||bg.hasOwnProperty(bm)&&y.Equals(bf[bm],bg[bm]);return!bi[0];}(bl))break;if(bi[0]){for(var bm in bg)if(function(bn){bi[0]=!bg.hasOwnProperty(bn)||bf.hasOwnProperty(bn);return!bi[0];}(bm))break;}return bi[0];}}else return bh=="function"&&("$Func"in bf?bf.$Func===bg.$Func&&bf.$Target===bg.$Target:"$Invokes"in bf&&"$Invokes"in bg&&y.arrayEquals(bf.$Invokes,bg.$Invokes));}};y.arrayEquals=function(bf,bg){var bh,bi;if(C.length(bf)===C.length(bg)){bh=true;bi=0;while(bh&&bi<C.length(bf)){!y.Equals(C.get(bf,bi),C.get(bg,bi))?bh=false:void 0;bi=bi+1;}return bh;}else return false;};y.dateEquals=function(bf,bg){return bf.getTime()===bg.getTime();};y.Compare=function(bf,bg){var bh,bi,bj,bk,bl,bm;if(bf===bg)return 0;else{bi=typeof bf;switch(bi=="function"?1:bi=="boolean"?2:bi=="number"?2:bi=="string"?2:bi=="object"?3:0){case 0:return typeof bg=="undefined"?0:-1;case 1:return f.FailWith("Cannot compare function values.");case 2:return bf<bg?-1:1;case 3:if(bf===null)bj=-1;else if(bg===null)bj=1;else if("CompareTo"in bf)bj=bf.CompareTo(bg);else if("CompareTo0"in bf)bj=bf.CompareTo0(bg);else if(bf instanceof a.Array&&bg instanceof a.Array)bj=y.compareArrays(bf,bg);else if(bf instanceof a.Date&&bg instanceof a.Date)bj=y.compareDates(bf,bg);else{bk=[0];for(var bn in bf)if(function(bo){return!bf.hasOwnProperty(bo)?false:!bg.hasOwnProperty(bo)?(bk[0]=1,true):(bk[0]=y.Compare(bf[bo],bg[bo]),bk[0]!==0);}(bn))break;if(bk[0]===0){for(var bo in bg)if(function(bp){return!bg.hasOwnProperty(bp)?false:!bf.hasOwnProperty(bp)&&(bk[0]=-1,true);}(bo))break;}bj=bk[0];}return bj;}}};y.Hash=function(bf){var bg;bg=typeof bf;return bg=="function"?0:bg=="boolean"?bf?1:0:bg=="number"?bf:bg=="string"?y.hashString(bf):bg=="object"?bf==null?0:bf instanceof a.Array?y.hashArray(bf):y.hashObject(bf):0;};y.compareArrays=function(bf,bg){var bh,bi;if(C.length(bf)<C.length(bg))return -1;else if(C.length(bf)>C.length(bg))return 1;else{bh=0;bi=0;while(bh===0&&bi<C.length(bf)){bh=y.Compare(C.get(bf,bi),C.get(bg,bi));bi=bi+1;}return bh;}};y.compareDates=function(bf,bg){return y.Compare(bf.getTime(),bg.getTime());};y.hashString=function(bf){var bg,bh,bi;if(bf===null)return 0;else{bg=5381;for(bh=0,bi=bf.length-1;bh<=bi;bh++)bg=y.hashMix(bg,bf[bh].charCodeAt());return bg;}};y.hashArray=function(bf){var bg,bh,bi;bg=-34948909;for(bh=0,bi=C.length(bf)-1;bh<=bi;bh++)bg=y.hashMix(bg,y.Hash(C.get(bf,bh)));return bg;};y.hashObject=function(bf){var bg,bh;if("GetHashCode"in bf)return bf.GetHashCode();else{bg=[0];for(var bi in bf)if(function(bj){bg[0]=y.hashMix(y.hashMix(bg[0],y.hashString(bj)),y.Hash(bf[bj]));return false;}(bi))break;return bg[0];}};y.hashMix=function(bf,bg){return(bf<<5)+bf+bg;};z.New=function(bf){return[bf];};A.New=function(bf,bg,bh){return{history:bf,stepNumber:bg,xIsNext:bh};};B.New=function(bf){return{squares:bf};};C.create=function(bf,bg){var bh,bi,bj;bh=new a.Array(bf);for(bi=0,bj=bf-1;bi<=bj;bi++)bh[bi]=bg;return bh;};C.ofList=function(bf){var bg,bh;bh=[];bg=bf;while(!(bg.$==0)){bh.push(I.head(bg));bg=I.tail(bg);}return bh;};C.map2=function(bf,bg,bh){var bi,bj,bk;C.checkLength(bg,bh);bi=new a.Array(bh.length);for(bj=0,bk=bh.length-1;bj<=bk;bj++)bi[bj]=bf(bg[bj],bh[bj]);return bi;};C.forall=function(bf,bg){var bh,bi,bj,bk;bh=true;bi=0;bk=C.length(bg);while(bh&&bi<bk)if(bf(bg[bi]))bi=bi+1;else bh=false;return bh;};C.init=function(bf,bg){var bh,bi,bj;bf<0?f.FailWith("Negative size given."):null;bh=new a.Array(bf);for(bi=0,bj=bf-1;bi<=bj;bi++)bh[bi]=bg(bi);return bh;};C.ofSeq=function(bf){var bg,bh;if(bf instanceof a.Array)return bf.slice();else if(bf instanceof J)return C.ofList(bf);else{bg=[];bh=N.Get(bf);try{while(bh.MoveNext())bg.push(bh.Current());return bg;}finally{if(typeof bh=="object"&&"Dispose"in bh)bh.Dispose();}}};C.checkLength=function(bf,bg){if(bf.length!==bg.length)f.FailWith("The arrays have different lengths.");};C.mapi=function(bf,bg){var bh,bi,bj;bh=new a.Array(bg.length);for(bi=0,bj=bg.length-1;bi<=bj;bi++)bh[bi]=bf(bi,bg[bi]);return bh;};C.tryPick=function(bf,bg){var bh,bi,bj;bh=null;bi=0;while(bi<bg.length&&bh==null){bj=bf(bg[bi]);bj!=null&&bj.$==1?bh=bj:void 0;bi=bi+1;}return bh;};C.last=function(bf){C.nonEmpty(bf);return bf[bf.length-1];};C.nonEmpty=function(bf){if(bf.length===0)f.FailWith("The input array was empty.");};C.choose=function(bf,bg){var bh,bi,bj,bk;bh=[];for(bi=0,bj=bg.length-1;bi<=bj;bi++){bk=bf(bg[bi]);bk==null?void 0:bh.push(bk.$0);}return bh;};C.sortInPlace=function(bf){C.mapInPlace(function(bg){return bg[0];},C.mapiInPlace(function(bg,bh){return[bh,bg];},bf).sort(y.Compare));};C.filter=function(bf,bg){var bh,bi,bj;bh=[];for(bi=0,bj=bg.length-1;bi<=bj;bi++)if(bf(bg[bi]))bh.push(bg[bi]);return bh;};b.checkThis=function(bf){return y.Equals(bf,null)?f.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bf;};C.get=function(bf,bg){C.checkBounds(bf,bg);return bf[bg];};C.checkBounds=function(bf,bg){if(bg<0||bg>=bf.length)f.FailWith("Index was outside the bounds of the array.");};C.length=function(bf){return bf.dims===2?bf.length*bf.length:bf.length;};C.set=function(bf,bg,bh){C.checkBounds(bf,bg);bf[bg]=bh;};E.iteri=function(bf,bg){var bh,bi;bh=0;bi=N.Get(bg);try{while(bi.MoveNext()){bf(bh,bi.Current());bh=bh+1;}}finally{if(typeof bi=="object"&&"Dispose"in bi)bi.Dispose();}};E.collect=function(bf,bg){return E.concat(E.map(bf,bg));};E.append=function(bf,bg){return{GetEnumerator:function(){var bh,bi;bh=N.Get(bf);bi=[true];return new Q.New(bh,null,function(bj){var bk;return bj.s.MoveNext()?(bj.c=bj.s.Current(),true):(bk=bj.s,!y.Equals(bk,null)?bk.Dispose():void 0,bj.s=null,bi[0]&&(bi[0]=false,bj.s=N.Get(bg),bj.s.MoveNext()?(bj.c=bj.s.Current(),true):(bj.s.Dispose(),bj.s=null,false)));},function(bj){var bk;bk=bj.s;!y.Equals(bk,null)?bk.Dispose():void 0;});}};};E.indexed=function(bf){return E.mapi(function(bg,bh){return[bg,bh];},bf);};E.map=function(bf,bg){return{GetEnumerator:function(){var bh;bh=N.Get(bg);return new Q.New(null,null,function(bi){return bh.MoveNext()&&(bi.c=bf(bh.Current()),true);},function(){bh.Dispose();});}};};E.tryFindIndex=function(bf,bg){var bh,bi,bj;bh=N.Get(bg);try{bi=true;bj=0;while(bi&&bh.MoveNext())if(bf(bh.Current()))bi=false;else bj=bj+1;return bi?null:{$:1,$0:bj};}finally{if(typeof bh=="object"&&"Dispose"in bh)bh.Dispose();}};E.concat=function(bf){return{GetEnumerator:function(){var bg;bg=N.Get(bf);return new Q.New(null,null,function(bh){var bi;while(true){bi=bh.s;if(y.Equals(bi,null)){if(bg.MoveNext()){bh.s=N.Get(bg.Current());bh=bh;}else{bg.Dispose();return false;}}else if(bi.MoveNext()){bh.c=bi.Current();return true;}else{bh.Dispose();bh.s=null;bh=bh;}}},function(bh){var bi;bi=bh.s;!y.Equals(bi,null)?bi.Dispose():void 0;!y.Equals(bg,null)?bg.Dispose():void 0;});}};};E.mapi=function(bf,bg){return E.map2(bf,E.initInfinite(a.id),bg);};E.tryPick=function(bf,bg){var bh,bi;bh=N.Get(bg);try{bi=null;while(y.Equals(bi,null)&&bh.MoveNext())bi=bf(bh.Current());return bi;}finally{if(typeof bh=="object"&&"Dispose"in bh)bh.Dispose();}};E.map2=function(bf,bg,bh){return{GetEnumerator:function(){var bi,bj;bi=N.Get(bg);bj=N.Get(bh);return new Q.New(null,null,function(bk){return bi.MoveNext()&&bj.MoveNext()&&(bk.c=bf(bi.Current(),bj.Current()),true);},function(){bi.Dispose();bj.Dispose();});}};};E.initInfinite=function(bf){return{GetEnumerator:function(){return new Q.New(0,null,function(bg){bg.c=bf(bg.s);bg.s=bg.s+1;return true;},void 0);}};};E.forall2=function(bf,bg,bh){return!E.exists2(function(bi,bj){return!bf(bi,bj);},bg,bh);};E.exists2=function(bf,bg,bh){var bi,bj,bk,bl;bi=N.Get(bg);try{bk=N.Get(bh);try{bl=false;while(!bl&&bi.MoveNext()&&bk.MoveNext())bl=bf(bi.Current(),bk.Current());bj=bl;}finally{if(typeof bk=="object"&&"Dispose"in bk)bk.Dispose();}return bj;}finally{if(typeof bi=="object"&&"Dispose"in bi)bi.Dispose();}};E.delay=function(bf){return{GetEnumerator:function(){return N.Get(bf());}};};E.distinctBy=function(bf,bg){return{GetEnumerator:function(){var bh,bi;bh=N.Get(bg);bi=new $.New$3();return new Q.New(null,null,function(bj){var bk,bl;if(bh.MoveNext()){bk=bh.Current();bl=bi.Add(bf(bk));while(!bl&&bh.MoveNext()){bk=bh.Current();bl=bi.Add(bf(bk));}return bl&&(bj.c=bk,true);}else return false;},function(){bh.Dispose();});}};};E.unfold=function(bf,bg){return{GetEnumerator:function(){return new Q.New(bg,null,function(bh){var bi;bi=bf(bh.s);return bi==null?false:(bh.c=bi.$0[0],bh.s=bi.$0[1],true);},void 0);}};};E.distinct=function(bf){return E.distinctBy(a.id,bf);};E.fold=function(bf,bg,bh){var bi,bj;bi=bg;bj=N.Get(bh);try{while(bj.MoveNext())bi=bf(bi,bj.Current());return bi;}finally{if(typeof bj=="object"&&"Dispose"in bj)bj.Dispose();}};E.compareWith=function(bf,bg,bh){var bi,bj,bk,bl,bm;bi=N.Get(bg);try{bk=N.Get(bh);try{bl=0;bm=true;while(bm&&bl===0)if(bi.MoveNext())bl=bk.MoveNext()?bf(bi.Current(),bk.Current()):1;else if(bk.MoveNext())bl=-1;else bm=false;bj=bl;}finally{if(typeof bk=="object"&&"Dispose"in bk)bk.Dispose();}return bj;}finally{if(typeof bi=="object"&&"Dispose"in bi)bi.Dispose();}};F.New$1=function(bf,bg){return{Parse:bf,Write:bg};};G=w.Route=bd.Class({ToLink:function(){return _.WriteLink(this.Segments,this.QueryArgs);}},null,G);G.Segment=function(bf,bg){var bh;bh=G.get_Empty();return G.New(bf,bh.QueryArgs,bh.FormData,bg,bh.Body);};G.FromHash=function(bf,bg){var bh,bi;bh=bf.indexOf("#");return bh===-1?G.get_Empty():(bi=bf.substring(bh+1),bg!=null&&bg.$0?bi===""||bi==="/"?G.get_Empty():_5.StartsWith(bi,"/")?G.FromUrl(bi.substring(1),{$:1,$0:true}):G.Segment$2(bi):G.FromUrl(bf.substring(bh),{$:1,$0:false}));};G.get_Empty=function(){return G.New(J.Empty,new P.New([]),new P.New([]),null,_1.CreateFromValue(null));};G.FromUrl=function(bf,bg){var bh,bi,bj;bh=(bi=bf.indexOf("?"),bi===-1?[bf,new P.New([])]:[_5.Substring(bf,0,bi),G.ParseQuery(bf.substring(bi+1))]);bj=G.get_Empty();return G.New(I.ofArray(_5.SplitChars(bh[0],["/"],bg!=null&&bg.$0?0:1)),bh[1],bj.FormData,bj.Method,bj.Body);};G.Segment$2=function(bf){var bg;bg=G.get_Empty();return G.New(I.ofArray([bf]),bg.QueryArgs,bg.FormData,bg.Method,bg.Body);};G.ParseQuery=function(bf){return _0.OfArray(C.ofSeq(C.choose(function(bg){var bh,bi;bh=_5.SplitChars(bg,["="],0);return!y.Equals(bh,null)&&bh.length===2?(bi=C.get(bh,1),{$:1,$0:[C.get(bh,0),bi]}):((function(bj){return function(bk){return bj("wrong format for query argument: "+_3.toSafe(bk));};}(function(bj){be.log(bj);}))(bg),null);},_5.SplitChars(bf,["&"],0))));};G.Combine=function(bf){var bg,bh,bi,bj,bk,bl,bm,bn,bo,bp;bm=C.ofSeq(bf);bn=C.length(bm);if(bn===0)return G.get_Empty();else if(bn===1)return C.get(bm,0);else{bg=null;bh=null;bo=[];bi=new P.New([]);bj=new P.New([]);bk=0;bp=C.length(bm);while(bk<bp)(function(){var bq,br,bs;bq=C.get(bm,bk);br=bq.Method;br!=null&&br.$==1?bg=br:void 0;bs=bq.Body.f();bs===null?void 0:bh=bs;bi=_0.FoldBack(function(bt,bu,bv){return bv.Add(bt,bu);},bi,bq.QueryArgs);bj=_0.FoldBack(function(bt,bu,bv){return bv.Add(bt,bu);},bj,bq.FormData);I.iter(function(bt){bo.push(bt);},bq.Segments);bk=bk+1;}());return G.New(I.ofSeq(bo),bi,bj,bg,_1.CreateFromValue(bh));}};G.New=function(bf,bg,bh,bi,bj){return new G({Segments:bf,QueryArgs:bg,FormData:bh,Method:bi,Body:bj});};H.startsWith=function(bf,bg){var bh;switch(bf.$==1?bg.$==1?y.Equals(bf.$0,bg.$0)?(bh=[bg.$0,bg.$1,bf.$0,bf.$1],1):2:2:0){case 0:return{$:1,$0:bg};case 1:return H.startsWith(bh[3],bh[1]);case 2:return null;}};I.ofArray=function(bf){var bg,bh,bi;bg=J.Empty;for(bh=C.length(bf)-1,bi=0;bh>=bi;bh--)bg=new J({$:1,$0:C.get(bf,bh),$1:bg});return bg;};I.rev=function(bf){var bg,bh;bg=J.Empty;bh=bf;while(bh.$==1){bg=new J({$:1,$0:bh.$0,$1:bg});bh=bh.$1;}return bg;};I.head=function(bf){return bf.$==1?bf.$0:I.listEmpty();};I.tail=function(bf){return bf.$==1?bf.$1:I.listEmpty();};I.listEmpty=function(){return f.FailWith("The input list was empty.");};I.iter=function(bf,bg){var bh;bh=bg;while(bh.$==1){bf(I.head(bh));bh=I.tail(bh);}};I.ofSeq=function(bf){var bg,bh,bi,bj,bk,bl;if(bf instanceof J)return bf;else if(bf instanceof a.Array)return I.ofArray(bf);else{bg=N.Get(bf);try{bi=bg.MoveNext();if(!bi)bh=J.Empty;else{bk=new J({$:1});bj=bk;while(bi){bj.$0=bg.Current();bg.MoveNext()?bj=(bl=new J({$:1}),bj.$1=bl,bl):bi=false;}bj.$1=J.Empty;bh=bk;}return bh;}finally{if(typeof bg=="object"&&"Dispose"in bg)bg.Dispose();}}};J=I.T=bd.Class({GetEnumerator:function(){return new Q.New(this,null,function(bf){var bg;bg=bf.s;return bg.$==0?false:(bf.c=bg.$0,bf.s=bg.$1,true);},void 0);}},null,J);J.Empty=new J({$:0});L=b.Obj=bd.Class({Equals:function(bf){return this===bf;},GetHashCode:function(){return -1;}},null,L);L.New=bd.Ctor(function(){},L);M.Parse=function(bf,bg){function bh(bi,bj){return bi.Segments.$==0?{$:1,$0:bj}:null;}return E.tryPick(function(bi){return bh(bi[0],bi[1]);},bf.Parse(bg));};M.HashLink=function(bf,bg){return"#"+M.Link(bf,bg);};M.Link=function(bf,bg){var bh;bh=M.Write(bf,bg);return bh==null?"":bh.$0.ToLink();};M.Write=function(bf,bg){var bh;bh=bf.Write(bg);return bh==null?null:{$:1,$0:G.Combine(bh.$0)};};N.Get=function(bf){return bf instanceof a.Array?N.ArrayEnumerator(bf):y.Equals(typeof bf,"string")?N.StringEnumerator(bf):bf.GetEnumerator();};N.ArrayEnumerator=function(bf){return new Q.New(0,null,function(bg){var bh;bh=bg.s;return bh<C.length(bf)&&(bg.c=C.get(bf,bh),bg.s=bh+1,true);},void 0);};N.StringEnumerator=function(bf){return new Q.New(0,null,function(bg){var bh;bh=bg.s;return bh<bf.length&&(bg.c=bf[bh],bg.s=bh+1,true);},void 0);};P=O.FSharpMap=bd.Class({GetEnumerator$1:function(){return N.Get(E.map(function(bf){return{K:bf.Key,V:bf.Value};},X.Enumerate(false,this.tree)));},Equals:function(bf){return this.get_Count()===bf.get_Count()&&E.forall2(y.Equals,this,bf);},get_Count:function(){var bf;bf=this.tree;return bf==null?0:bf.Count;},Add:function(bf,bg){return new P.New$1(X.Add(Z.New(bf,bg),this.tree));},get_IsEmpty:function(){return this.tree==null;},get_Tree:function(){return this.tree;},GetHashCode:function(){return y.Hash(C.ofSeq(this));},GetEnumerator:function(){return this.GetEnumerator$1();},CompareTo0:function(bf){return E.compareWith(y.Compare,this,bf);}},L,P);P.New=bd.Ctor(function(bf){P.New$1.call(this,_9.fromSeq(bf));},P);P.New$1=bd.Ctor(function(bf){L.New.call(this);this.tree=bf;},P);Q=N.T=bd.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},L,Q);Q.New=bd.Ctor(function(bf,bg,bh,bi){L.New.call(this);this.s=bf;this.c=bg;this.n=bh;this.d=bi;},Q);S=b.InvalidOperationException=bd.Class({},R,S);S.New=bd.Ctor(function(bf){S.New$2.call(this,bf,null);},S);S.New$2=bd.Ctor(function(bf,bg){this.message=bf;this.inner=bg;K.setPrototypeOf(this,S.prototype);},S);T["Context`1.Provide"]=function(bf,bg,bh){return j.createElement(bf.Provider,{value:bg},g.inlineArrayOfSeq(bh));};T["Context`1.Consume"]=function(bf,bg){return j.createElement(bf.Consumer,null,function(bh){return j.createElement(j.Fragment,null,g.inlineArrayOfSeq(bg(bh)));});};U.New=function(bf){return{shouldBe:bf};};q.calculateWinner=function(bf){function bg(bh,bi,bj){return C.get(bf,bh)!=null&&y.Equals(C.get(bf,bh),C.get(bf,bi))&&y.Equals(C.get(bf,bh),C.get(bf,bj))?C.get(bf,bh):null;}return C.tryPick(function(bh){return bg(bh[0],bh[1],bh[2]);},[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]]);};q.Square=function(bf){var bg;return j.createElement("button",{className:"square",onClick:function(){bf.onClick();}},(bg=bf.value,bg==null?"":bg.$0));};V=q.Board=bd.Class({render:function(){var bf;function bg(bh){return q.Square(_8.New(C.get(bf.props.squares,bh),function(){bf.props.onClick(bh);}));}bf=this;return j.createElement("div",null,j.createElement("div",{className:"board-row"},bg(0),bg(1),bg(2)),j.createElement("div",{className:"board-row"},bg(3),bg(4),bg(5)),j.createElement("div",{className:"board-row"},bg(6),bg(7),bg(8)));}},k,V);V.New=bd.Ctor(function(bf){k.call(this,bf);},V);W.New=function(bf,bg){return{squares:bf,onClick:bg};};Y.New=function(bf,bg,bh,bi,bj){return{Node:bf,Left:bg,Right:bh,Height:bi,Count:bj};};Z=O.Pair=bd.Class({Equals:function(bf){return y.Equals(this.Key,bf.Key);},GetHashCode:function(){return y.Hash(this.Key);},CompareTo0:function(bf){return y.Compare(this.Key,bf.Key);}},null,Z);Z.New=function(bf,bg){return new Z({Key:bf,Value:bg});};_0.OfArray=function(bf){return new P.New$1(X.OfSeq(E.map(function(bg){return Z.New(bg[0],bg[1]);},bf)));};_0.FoldBack=function(bf,bg,bh){return E.fold(function(bi,bj){return bf(bj.Key,bj.Value,bi);},bh,X.Enumerate(true,bg.get_Tree()));};_0.ToSeq=function(bf){return E.map(function(bg){return[bg.Key,bg.Value];},X.Enumerate(false,bf.get_Tree()));};_1.CreateFromValue=function(bf){return _7.New(true,bf,_1.cachedLazy);};_1.cachedLazy=function(){return this.v;};_2.$cctor=function(){_2.$cctor=a.ignore;_2.theme=j.createContext("default");};_3.toSafe=function(bf){return bf==null?"":bf;};_4.array=function(bf,bg,bh){return bg==null?bh!=null&&bh.$==1?bf.slice(0,bh.$0+1):[]:bh==null?bf.slice(bg.$0):bf.slice(bg.$0,bh.$0+1);};_5.StartsWith=function(bf,bg){return bf.substring(0,bg.length)==bg;};_5.Substring=function(bf,bg,bh){return bf.substr(bg,bh);};_5.SplitChars=function(bf,bg,bh){return _5.Split(bf,new a.RegExp("["+_5.RegexEscape(bg.join(""))+"]"),bh);};_5.Split=function(bf,bg,bh){return bh===1?C.filter(function(bi){return bi!=="";},_5.SplitWith(bf,bg)):_5.SplitWith(bf,bg);};_5.RegexEscape=function(bf){return bf.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_5.SplitWith=function(bf,bg){return bf.split(bg);};_5.concat=function(bf,bg){return C.ofSeq(bg).join(bf);};_5.IsNullOrEmpty=function(bf){return bf==null||bf=="";};_5.Join=function(bf,bg){return bg.join(bf);};_7.New=function(bf,bg,bh){return{c:bf,v:bg,f:bh};};X.Enumerate=function(bf,bg){function bh(bi,bj){var bk;while(true)if(bi==null)return bj.$==1?{$:1,$0:[bj.$0[0],[bj.$0[1],bj.$1]]}:null;else if(bf){bk=bi;bi=bk.Right;bj=new J({$:1,$0:[bk.Node,bk.Left],$1:bj});}else{bk=bi;bi=bk.Left;bj=new J({$:1,$0:[bk.Node,bk.Right],$1:bj});}}return E.unfold(function(bi){return bh(bi[0],bi[1]);},[bg,J.Empty]);};X.OfSeq=function(bf){var bg;bg=C.ofSeq(E.distinct(bf));C.sortInPlace(bg);return X.Build(bg,0,bg.length-1);};X.Build=function(bf,bg,bh){var bi,bj,bk;return bh-bg+1<=0?null:(bi=(bg+bh)/2>>0,(bj=X.Build(bf,bg,bi-1),(bk=X.Build(bf,bi+1,bh),X.Branch(C.get(bf,bi),bj,bk))));};X.Branch=function(bf,bg,bh){var bi,bj;return Y.New(bf,bg,bh,1+(bi=bg==null?0:bg.Height,(bj=bh==null?0:bh.Height,y.Compare(bi,bj)===1?bi:bj)),1+(bg==null?0:bg.Count)+(bh==null?0:bh.Count));};X.Add=function(bf,bg){return X.Put(function(bh,bi){return bi;},bf,bg);};X.Put=function(bf,bg,bh){var bi,bj;bi=X.Lookup(bg,bh);bj=bi[0];return bj==null?X.Rebuild(bi[1],X.Branch(bg,null,null)):X.Rebuild(bi[1],X.Branch(bf(bj.Node,bg),bj.Left,bj.Right));};X.Lookup=function(bf,bg){var bh,bi,bj,bk;bh=[];bi=bg;bj=true;while(bj)if(bi==null)bj=false;else{bk=y.Compare(bf,bi.Node);bk===0?bj=false:bk===1?(bh.unshift([true,bi.Node,bi.Left]),bi=bi.Right):(bh.unshift([false,bi.Node,bi.Right]),bi=bi.Left);}return[bi,bh];};X.Rebuild=function(bf,bg){var bh,bj,bk,bl,bm,bn,bo,bp,bq,br;function bi(bs){return bs==null?0:bs.Height;}bh=bg;for(bj=0,bk=C.length(bf)-1;bj<=bk;bj++){bh=(bl=C.get(bf,bj),bl[0]?(bm=bl[1],(bn=bl[2],bi(bh)>bi(bn)+1?bi(bh.Left)===bi(bh.Right)+1?(bo=bh.Left,X.Branch(bo.Node,X.Branch(bm,bn,bo.Left),X.Branch(bh.Node,bo.Right,bh.Right))):X.Branch(bh.Node,X.Branch(bm,bn,bh.Left),bh.Right):X.Branch(bm,bn,bh))):(bp=bl[1],(bq=bl[2],bi(bh)>bi(bq)+1?bi(bh.Right)===bi(bh.Left)+1?(br=bh.Right,X.Branch(br.Node,X.Branch(bh.Node,bh.Left,br.Left),X.Branch(bp,br.Right,bq))):X.Branch(bh.Node,bh.Left,X.Branch(bp,bh.Right,bq)):X.Branch(bp,bh,bq))));}return bh;};_8.New=function(bf,bg){return{value:bf,onClick:bg};};_9.fromSeq=function(bf){var bg;bg=C.ofSeq(E.delay(function(){return E.collect(function(bh){return[Z.New(bh[0],bh[1])];},E.distinctBy(function(bh){return bh[0];},bf));}));C.sortInPlace(bg);return X.Build(bg,0,bg.length-1);};_.WriteLink=function(bf,bg){var bh;bh=bg.get_IsEmpty()?"":"?"+_.WriteQuery(bg);return"/"+_.Concat(bf)+bh;};_.Concat=function(bf){var bg,bh;bg=[];bh=true;I.iter(function(bi){if(!_5.IsNullOrEmpty(bi)){bh?bh=false:bg.push("/");bg.push(bi);}},bf);return _5.Join("",C.ofSeq(bg));};_.WriteQuery=function(bf){function bg(bh,bi){return bh+"="+bi;}return _5.concat("&",E.map(function(bh){return bg(bh[0],bh[1]);},_0.ToSeq(bf)));};$=O.HashSet=bd.Class({Add:function(bf){return this.add(bf);},add:function(bf){var bg,bh;bg=this.hash(bf);bh=this.data[bg];return bh==null?(this.data[bg]=[bf],this.count=this.count+1,true):this.arrContains(bf,bh)?false:(bh.push(bf),this.count=this.count+1,true);},arrContains:function(bf,bg){var bh,bi,bj,bk;bh=true;bi=0;bk=bg.length;while(bh&&bi<bk)if(this.equals.apply(null,[bg[bi],bf]))bh=false;else bi=bi+1;return!bh;},GetEnumerator:function(){return N.Get(ba.concat(this.data));}},L,$);$.New$3=bd.Ctor(function(){$.New$4.call(this,[],y.Equals,y.Hash);},$);$.New$4=bd.Ctor(function(bf,bg,bh){var bi;L.New.call(this);this.equals=bg;this.hash=bh;this.data=[];this.count=0;bi=N.Get(bf);try{while(bi.MoveNext())this.add(bi.Current());}finally{if(typeof bi=="object"&&"Dispose"in bi)bi.Dispose();}},$);C.mapiInPlace=function(bf,bg){var bh,bi;for(bh=0,bi=bg.length-1;bh<=bi;bh++)bg[bh]=bf(bh,bg[bh]);return bg;};C.mapInPlace=function(bf,bg){var bh,bi;for(bh=0,bi=bg.length-1;bh<=bi;bh++)bg[bh]=bf(bg[bh]);};ba.concat=function(bf){var bg,bh;bg=[];for(var bi in bf)bg.push.apply(bg,bf[bi]);return bg;};bd.OnLoad(function(){e.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
